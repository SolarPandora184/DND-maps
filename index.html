<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>D&D Map + Audio Viewer</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      background-color: #111;
      color: white;
    }
    img {
      max-width: 100%;
      max-height: 80vh;
      border: 4px solid #444;
      border-radius: 12px;
      margin-top: 10px;
    }
    #controls, #fileInputs {
      margin: 20px;
    }
    button {
      font-size: 16px;
      margin: 5px;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      background-color: #333;
      color: white;
      cursor: pointer;
    }
    input[type="file"] {
      margin: 5px;
    }
  </style>
</head>
<body>
  <h1>D&D Map + Audio Viewer</h1>

  <div id="fileInputs">
    <label>Upload Map Images:
      <input type="file" id="mapUpload" multiple accept="image/*">
    </label>
    <br>
    <label>Upload Audio Files:
      <input type="file" id="audioUpload" multiple accept="audio/*">
    </label>
  </div>

  <div id="viewer">
    <img id="mapImage" src="" alt="Your map will appear here">
    <audio id="mapAudio" controls autoplay></audio>
  </div>

  <div id="controls">
    <button onclick="prevMap()">Previous</button>
    <button onclick="nextMap()">Next</button>
  </div>

  <script>
    let mapFiles = [];
    let audioFiles = [];
    let currentIndex = 0;

    document.getElementById('mapUpload').addEventListener('change', (e) => {
      mapFiles = Array.from(e.target.files);
      currentIndex = 0;
      showMap();
    });

    document.getElementById('audioUpload').addEventListener('change', (e) => {
      audioFiles = Array.from(e.target.files);
      currentIndex = 0;
      showMap();
    });

    function showMap() {
      const mapImg = document.getElementById('mapImage');
      const mapAudio = document.getElementById('mapAudio');

      if (mapFiles[currentIndex]) {
        mapImg.src = URL.createObjectURL(mapFiles[currentIndex]);
      } else {
        mapImg.src = '';
      }

      if (audioFiles[currentIndex]) {
        mapAudio.src = URL.createObjectURL(audioFiles[currentIndex]);
        mapAudio.play();
      } else {
        mapAudio.src = '';
      }
    }

    function nextMap() {
      if (mapFiles.length === 0) return;
      currentIndex = (currentIndex + 1) % mapFiles.length;
      showMap();
    }

    function prevMap() {
      if (mapFiles.length === 0) return;
      currentIndex = (currentIndex - 1 + mapFiles.length) % mapFiles.length;
      showMap();
    }
  </script>
</body>
</html>
